<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />

<meta name="keywords" content="百度地图,百度地图API，百度地图自定义工具，百度地图所见即所得工具" />

<meta name="description" content="百度地图API自定义地图，帮助用户在可视化操作下生成百度地图" />

<title>百度地图API自定义地图</title>

<!--引用百度地图API-->
<style type="text/css">

    html,body{margin:0;padding:0;}

    .iw_poi_title {color:#CC5522;font-size:14px;font-weight:bold;overflow:hidden;padding-right:13px;white-space:nowrap}
    .iw_poi_content {font:12px arial,sans-serif;overflow:visible;padding-top:4px;white-space:-moz-pre-wrap;word-wrap:break-word}
</style>

<script type="text/javascript" src="http://api.map.baidu.com/api?key=&v=1.1&services=true"></script>

</head>


<body>

  <!--百度地图容器-->

    <div style="width:1600px;height:900px;border:#ccc solid 1px;" id="dituContent"></div>

</body>

<script type="text/javascript">

    //创建和初始化地图函数：
    function initMap(){
 
       createMap();//创建地图

        setMapEvent();//设置地图事件

        addMapControl();//向地图添加控件

        addMarker();//向地图中添加marker

        addPolyline();//向地图中添加线
    }
    
    
//创建地图函数：

    function createMap(){
        var map = new BMap.Map("dituContent");//在百度地图容器中创建一个地图
  
      var point = new BMap.Point(111.063165,21.64625);//定义一个中心点坐标
 
       map.centerAndZoom(point,14);//设定地图的中心点和坐标并将地图显示在地图容器中

        window.map = map;//将map变量存储在全局
    }
    
    

//地图事件设置函数：

    function setMapEvent(){
        map.enableDragging();//启用地图拖拽事件，默认启用(可不写)

        map.enableScrollWheelZoom();//启用地图滚轮放大缩小
 
       map.enableDoubleClickZoom();//启用鼠标双击放大，默认启用(可不写)

        map.enableKeyboard();//启用键盘上下左右键移动地图
    }
    
    

//地图控件添加函数：

    function addMapControl(){
        //向地图中添加缩放控件
	var ctrl_nav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});
	map.addControl(ctrl_nav);

        //向地图中添加缩略图控件
	var ctrl_ove = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});
	map.addControl(ctrl_ove);

        //向地图中添加比例尺控件
	var ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
	map.addControl(ctrl_sca);
    }
    
    

//标注点数组
    var markerArr = [{title:"林头中学",content:"吴校长13929781318<br/>王老师13592981910",point:"111.080803|21.661688",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"环城中学",content:"刘仁13929791323	<br/>蔡主任13542338989",point:"111.066045|21.664057",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"林头中心小学",content:"卢盛初13686741559<br/>吴老师13542390510",point:"111.067795|21.668667",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"林新小学",content:"苏奇13543353087",point:"111.07799|21.668583",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"尾轮小学",content:"周康华13727820728",point:"111.115525|21.700601",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"亭梓小学",content:"梁碧13543398008",point:"111.109309|21.694867",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"秧前小学",content:"蔡昌福13428170568",point:"111.065559|21.689491",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"那关小学",content:"李加添13553693113",point:"111.04958|21.710977",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"黄阳小学",content:"邱立民13543351961",point:"111.049061|21.691599",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"参桥小学",content:"杨国锋13542327011",point:"111.041622|21.668753",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"林头实验小学",content:"崔志坚13542327006<br/>林老师13413305781",point:"111.048641|21.662106",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"新园小学",content:"张智文13535912632",point:"111.033426|21.647604",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"新兴小学",content:"蔡明13727765998",point:"111.067862|21.656954",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"田充小学",content:"蔡瑞忠13553691319",point:"111.084972|21.646168",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"章班小学",content:"梁仁俊13686787661",point:"111.059731|21.622349",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"鹤树小学",content:"钟福宏13535913257",point:"111.113506|21.678278",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"新圩小学",content:"张用13543396373",point:"111.094465|21.673017",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"中田小学",content:"周校长13542393214",point:"111.103129|21.679834",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"新屋小学",content:"杨燕13553671092",point:"111.094176|21.687502",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"木院小学",content:"韩振仲15119706933",point:"111.08693|21.687864",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}
		 ,{title:"培林小学",content:"蔡伙基13686785178",point:"111.094388|21.700306",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"文车小学",content:"廖锦儒13423503399",point:"111.075024|21.694989",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"北诏小学",content:"刘伟安13542354875",point:"111.065986|21.708233",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"赤岭小学",content:"廖江白13542326438",point:"111.043002|21.715141",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"下寮小学",content:"蔡社15976538420",point:"111.052094|21.674619",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"渡仔小学",content:"蔡华13542395506",point:"111.035943|21.669103",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"槟榔小学",content:"林军13423591661",point:"111.069555|21.654921",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"田尾小学",content:"梁海波13542395268",point:"111.063165|21.64625",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"莲塘小学",content:"李雪强15813027000",point:"111.074172|21.613433",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"大器小学",content:"林俊锦13542319624",point:"111.050001|21.631577",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"樟木山小学",content:"陈雄明15976578802",point:"111.044234|21.652573",isOpen:0,icon:{w:23,h:25,l:0,t:21,x:9,lb:12}}

		 ,{title:"大衙中学",content:"廖元生13929789266	王老师13727806803",point:"111.134721|21.631628",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"大衙小学",content:"吴汉13580065298<br/>钟老师13432918923",point:"111.126569|21.634399",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"华楼小学",content:"陈郁喜15113653011",point:"111.091849|21.624099",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"塘村小学",content:"唐木辉13535911397",point:"111.15737|21.643442",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"板桥小学",content:"梁伟珠13543354270",point:"111.112968|21.646149",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"乌坭小学",content:"蔡广惠13686781229",point:"111.103346|21.63608",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"禾塘坡小学",content:"陈校长13686787667",point:"111.175316|21.639333",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"大角小学",content:"黄大全13727720408",point:"111.144174|21.615092",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"塘迳小学",content:"林什崇15767860788",point:"111.148815|21.635573",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"大坡小学",content:"蔡志飞13542395269",point:"111.142346|21.649959",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"石民小学",content:"陈郁星13423560669",point:"111.136983|21.667177",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"龙记小学",content:"蔡虎13727808218",point:"111.125898|21.682428",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}

		 ,{title:"尖角山小学",content:"陈桓13828635577",point:"111.120041|21.624116",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}
 
		 ,{title:"电白五中",content:"唐泽13727820446",point:"111.011706|21.64594",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"实践中学",content:"钟良13653051550",point:"110.981172|21.61752",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"坡心中心小南校区",content:"张校长18718389933",point:"111.010583|21.640557",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"中坡小学",content:"黄小江13929720179",point:"111.007403|21.652069",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"正村小学",content:"李锦旺15089619933",point:"111.011697|21.644829",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}
		 ,{title:"金星小学",content:"林港18719129738",point:"111.014394|21.636605",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"清河小学",content:"江辉13727767000",point:"110.961985|21.610024",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"霞坡小学",content:"周月英13543389202",point:"110.973252|21.611902",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"山寮小学",content:"李增15986214628",point:"110.982824|21.61602",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"排河小学",content:"梁金起13423555623",point:"110.967976|21.617958",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"新文小学",content:"赖金玲13543358489	黄老师15119679696",point:"110.974753|21.627347",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"新河小学",content:"陈广林18206687939",point:"110.950488|21.587708",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"七星小学",content:"何相13727800938",point:"110.94836|21.593635",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"新苗小学",content:"潘净华13543397430",point:"110.949366|21.603251",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"潭莲小学",content:"颜其汉15119629955",point:"110.965289|21.5974",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}
		 ,{title:"新坡小学",content:"黄健彬13727823316",point:"110.983454|21.635559",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"上吴小学",content:"郑勇13620456998",point:"110.994036|21.643865",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"盐仓小学",content:"林广其13432301707",point:"111.022791|21.615041",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"雅奏小学",content:"陈成球13790937144",point:"111.028052|21.651469",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"郁头鹅小学",content:"李金锋13432323950",point:"110.997781|21.621895",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"牛六架小学",content:"潘增13727768398",point:"110.986642|21.604874",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"车头仔小学",content:"林亚交15976545670",point:"110.997575|21.640382",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"家家乐小学",content:"李柱13727774556",point:"111.007219|21.630246",isOpen:0,icon:{w:23,h:25,l:69,t:21,x:9,lb:12}}

		 ,{title:"石湾小学",content:"刘校长13432957488",point:"111.134065|21.689071",isOpen:0,icon:{w:23,h:25,l:92,t:21,x:9,lb:12}}

		 ,{title:"和平小学",content:"张校长13542359266",point:"111.168295|21.705425",isOpen:0,icon:{w:23,h:25,l:92,t:21,x:9,lb:12}}	
		 ];  


//创建marker
    function addMarker(){
        for(var i=0;i<markerArr.length;i++){
            var json = markerArr[i];
            var p0 = json.point.split("|")[0];
            var p1 = json.point.split("|")[1];
            var point = new BMap.Point(p0,p1);
			var iconImg = createIcon(json.icon);
            var marker = new BMap.Marker(point,{icon:iconImg});
			var iw = createInfoWindow(i);
			var label = new BMap.Label(json.title,{"offset":new BMap.Size(json.icon.lb-json.icon.x+10,-20)});
			marker.setLabel(label);
            map.addOverlay(marker);
            label.setStyle({
                        borderColor:"#808080",
                        color:"#333",
                        cursor:"pointer"
            });
			
			(function(){
				var index = i;
				var _iw = createInfoWindow(i);
				var _marker = marker;
				_marker.addEventListener("click",function(){
				    this.openInfoWindow(_iw);
			    });
			    _iw.addEventListener("open",function(){
				    _marker.getLabel().hide();
			    })
			    _iw.addEventListener("close",function(){
				    _marker.getLabel().show();
			    })
				label.addEventListener("click",function(){
				    _marker.openInfoWindow(_iw);
			    })
				if(!!json.isOpen){
					label.hide();
					_marker.openInfoWindow(_iw);
				}
			})()
        }
    }
    

//创建InfoWindow
    function createInfoWindow(i){
        var json = markerArr[i];
        var iw = new BMap.InfoWindow("<b class='iw_poi_title' title='" + json.title + "'>" + json.title + "</b><div class='iw_poi_content'>"+json.content+"</div>");
        return iw;
    }
    

//创建一个Icon
    function createIcon(json){
        var icon = new BMap.Icon("./us_mk_icon.png", new BMap.Size(json.w,json.h),{imageOffset: new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})
        return icon;
    }
//标注线数组
    var plPoints = [{style:"solid",weight:6,color:"#f00",opacity:0.4,points:["111.026348|21.667449","111.028145|21.663888","111.029726|21.662444","111.030588|21.6611","111.032097|21.659253","111.032241|21.658514","111.032241|21.657607","111.031882|21.656767","111.040865|21.660092","111.041727|21.660294","111.048015|21.662377","111.055552|21.665055","111.062963|21.667986","111.07748|21.663452","111.078773|21.662041","111.07889|21.661402","111.079178|21.6611","111.083975|21.659269","111.092275|21.655977","111.103019|21.651795","111.105264|21.652501","111.105839|21.653055","111.106989|21.653139","111.108408|21.652752","111.110924|21.651677","111.112648|21.649309","111.113367|21.647008","111.113363|21.645714","111.114387|21.643531","111.116098|21.640516","111.122027|21.636434","111.122763|21.636047","111.125027|21.636232","111.130165|21.634821","111.135034|21.633023","111.135627|21.631461","111.135663|21.631427"]}
		 ,{style:"solid",weight:6,color:"#00f",opacity:0.4,points:["110.977076|21.591205","110.985161|21.593893","110.991018|21.596851","110.994144|21.597388","110.996551|21.597422","111.002229|21.597019","111.011176|21.597926","111.020123|21.5947","111.024399|21.593792","111.040065|21.593759","111.053109|21.593624","111.057061|21.592549","111.077579|21.62622","111.078225|21.630184","111.076752|21.640432","111.075998|21.644194","111.077399|21.646311","111.085951|21.653231","111.089113|21.656792","111.089221|21.656792"]}
		 ,{style:"solid",weight:6,color:"#f0f",opacity:0.4,points:["110.967797|21.621826","110.970635|21.623515","110.974579|21.62695","110.978397|21.63026","110.979816|21.631562","110.980705|21.632956","110.982628|21.635409","110.983526|21.63577","110.989176|21.637458","110.993407|21.638811","110.998968|21.640398","110.999435|21.640566","111.000935|21.640633","111.001196|21.640524","111.003801|21.640532","111.00434|21.640482","111.00774|21.638836","111.008512|21.638382","111.0095|21.636912","111.010048|21.636022","111.010722|21.635535","111.011665|21.636862","111.015636|21.640238","111.022858|21.64642","111.027763|21.650804","111.029919|21.6524","111.031805|21.656515","111.031823|21.656515"]}
		 ,{style:"solid",weight:6,color:"#0f0",opacity:0.4,points:["111.007677|21.59775","111.010552|21.606184","111.009761|21.611376","111.006859|21.613073","111.002314|21.618886","111.003679|21.622952","111.010363|21.634241","111.010758|21.635216"]}
		 ];
    //向地图中添加线函数
    function addPolyline(){
		for(var i=0;i<plPoints.length;i++){
			var json = plPoints[i];
			var points = [];
			for(var j=0;j<json.points.length;j++){
				var p1 = json.points[j].split("|")[0];
				var p2 = json.points[j].split("|")[1];
				points.push(new BMap.Point(p1,p2));
			}
			var line = new BMap.Polyline(points,{strokeStyle:json.style,strokeWeight:json.weight,strokeColor:json.color,strokeOpacity:json.opacity});
			map.addOverlay(line);
		}
	}
    
    initMap();//创建和初始化地图
</script>
</html>